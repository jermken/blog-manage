# 利用正则表达式将一串数字转换成千分符

## for example
    123456    --->    '123,456'

这种需求我们再开发的时候会经常遇到，今天就来总结下如何使用正则表达式快速实现。

## talk is cheap, show me code
```
    const numberTransFun = (x) => {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }
```
接下来，我们来拆分下正则的结构。

正则的表达式： `/\B(?=(\d{3})+(?!\d))/g`， 我们首先将正则表达式提取出来，`/\B/g`；在正则表达式中`\B`表示非字边界匹配，举个栗子，
```
    let num = 123456789;
    num.toString(),replace(/\B/g,',');
    console.log(num); // 1,2,3,4,5,6,7,8,9
```
我们可以看到将非字边界1和2之间 2和3之间 等等 全部替换了。为此做到了我们的第一部：在数字之间插入符号`,`，接着我们看下`?=(\d{3})+`，这个是指匹配其后带有一次或者多次3个数字的非字边界，
```
    let num = 123456789;
    num.toString(),replace(/\B(?=(\d{3})+)/g,',');
    console.log(num); // 1,2,3,4,5,6,789
```
可以看到与我们想要的结果接近了，但是我们发现我们想要的是`123,456,789`，那么接下来应该要做的是1和2,2和3,4和5,5和6之间的符号，那么这时`?!\d`能做到， `?!`的意思跟`?=`相反，指在其后不匹配。那么`?!\d`就是说其后不匹配数字，结合起来就是匹配其后带有一次或多次3个数字且在这些数字之后不再跟随数字的非字边界。
举个例子： 1和2之间的非字边界`1,23456789`，`,`后面是可分为234-567-89，可以看到其后有两次匹配到3位数字，但89不是，那么这就跟匹配到的这些3位数字后面不再跟随有89产生的矛盾，因此1和2之间的非字边界不匹配。同理在2和3之间，后面是可分为345-678-9，其后多了个9，所以不匹配。

